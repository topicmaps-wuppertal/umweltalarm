(this.webpackJsonpumweltalarm=this.webpackJsonpumweltalarm||[]).push([[0],{297:function(e,t,n){},422:function(e,t,n){},800:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(22),i=n.n(s),c=(n(422),n(8)),l=n(9),o=n(14),d=n.n(o),u=n(23),b=n(13),h=(n(297),n(298),n(299),n(300),n(301),n(30)),j=n(79),p=n(166),f=n(209),x=n(45),v=n(210),m=n(295),g=n(416),O=n(24),y=n(62),k=n(235),w=n(237),z=n(229),S=n(144),A=n(145),B=n(168),_="0.7.12",L=function(){return _},C=n(2),D=function(){var e=Object(r.useContext)(O.b).setAppMenuActiveMenuSection;return Object(C.jsxs)("div",{style:{fontSize:"11px"},children:[Object(C.jsx)("b",{children:"Hintergrundkarten"}),": Stadtkarte 2.0 \xa9 RVR | True Orthophoto 2020 \xa9 Stadt Wuppertal | Openmaptiles basierte Vectorkarte (hosted by cismet)"," ",Object(C.jsx)("a",{className:"pleaseRenderAsLink",onClick:function(){e("help"),B.scroller.scrollTo("Datengrundlage",{containerId:"myMenu"})},children:"(Details und Nutzungsbedingungen)"}),Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("b",{children:[document.title," v",L()]}),":"," ",Object(C.jsx)("a",{href:"https://cismet.de/",target:"_cismet",children:"cismet GmbH"})," ","auf Basis von"," ",Object(C.jsx)("a",{href:"http://leafletjs.com/",target:"_more",children:"Leaflet"})," ","und"," ",Object(C.jsxs)("a",{href:"https://cismet.de/#refs",target:"_cismet",children:["cids | react-cismap v",A.a]})," ","|"," ",Object(C.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cismet.de/datenschutzerklaerung.html",children:"Datenschutzerkl\xe4rung (Privacy Policy)"})]})]})},F=function(){Object(r.useContext)(O.b).setAppMenuActiveMenuSection;return Object(C.jsx)(z.a,{menuIcon:"bars",menuTitle:"Einstellungen und Kompaktanleitung",menuIntroduction:Object(C.jsxs)("span",{children:["\xdcber ",Object(C.jsx)("strong",{children:"Einstellungen"})," k\xf6nnen Sie die Darstellung der Hintergrundkarte und der Objekte an Ihre Vorlieben anpassen. W\xe4hlen Sie ",Object(C.jsx)("strong",{children:"Kompaktanleitung"})," f\xfcr detailliertere Bedienungsinformationen.enungsinformationen."]}),menuSections:[Object(C.jsx)(w.a,{skipFilterTitleSettings:!0,skipClusteringSettings:!0,skipSymbolsizeSetting:!0},"settings"),Object(C.jsx)(S.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(C.jsx)(k.a,{configs:Object(y.b)(document.title,undefined)})},"help")],menuFooter:Object(C.jsx)(D,{})})},I=n(26),T=function(){var e=Object(r.useContext)(I.a).windowSize;return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{style:{position:"absolute",top:((null===e||void 0===e?void 0:e.height)||500)/2-1,width:(null===e||void 0===e?void 0:e.width)||"100%",height:"2px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}}),Object(C.jsx)("div",{style:{position:"absolute",left:((null===e||void 0===e?void 0:e.width)||500)/2-1,height:(null===e||void 0===e?void 0:e.height)||"100%",width:"2px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}}),Object(C.jsx)("div",{style:{borderRadius:"50%",position:"absolute",left:((null===e||void 0===e?void 0:e.width)||500)/2-10,top:((null===e||void 0===e?void 0:e.height)||500)/2-10,height:"20px",width:"20px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}})]})},K=n(411),P=n(126),W=n(412),N=n.n(W),E=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r,a,s){var i,c,l,o,u,b,h,j,p,f,x,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.table("daq_meta").get({name:a});case 2:if(i=e.sent,c=null,null!=i&&(c=i.md5),console.log("DAQ for "+a),l={parameters:{daqKey:a,md5:c||"-"}},(o=new FormData).append("taskparams",new Blob([JSON.stringify(l)],{type:"application/json"})),"--cached--data--"!==r){e.next=15;break}return"data retrieved",u=i.time,e.abrupt("return",new Promise((function(e,t){e({data:"data retrieved",time:u})})));case 15:return e.next=17,fetch(n+"/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+r},body:o});case 17:if(!((b=e.sent).status>=200&&b.status<300)){e.next=58;break}return e.next=21,b.json();case 21:if(!(h=e.sent).res){e.next=55;break}if(e.prev=23,j=JSON.parse(h.res),200!==(p=j.status)){e.next=46;break}if(console.log("DAQ cache miss for "+a),f=JSON.parse(j.content),x=j.time,(v={}).md5=j.md5,v.time=x,v.name=a,console.log("new md5: "+v.md5),null==i){e.next=40;break}return e.next=38,s.table("daq_meta").update(i.id,v);case 38:e.next=41;break;case 40:s.table("daq_meta").add(v);case 41:if(!(f&&f[0]&&f[0].geojson)){e.next=44;break}return e.next=44,M(f,a,t,s);case 44:e.next=47;break;case 46:304===p&&(console.log("DAQ cache hit for "+a),null!=i&&(x=i.time,f="data retrieved"));case 47:return e.abrupt("return",new Promise((function(e,t){e({data:f,time:x})})));case 50:return e.prev=50,e.t0=e.catch(23),e.abrupt("return",new Promise((function(t,n){n({status:500,desc:"error when parsing the server result. probably the content has the wrong structure",content:h,exception:e.t0})})));case 53:e.next=56;break;case 55:return e.abrupt("return",new Promise((function(e,t){t({status:500,desc:"error when parsing the server result.",content:h})})));case 56:e.next=63;break;case 58:if(401!==b.status){e.next=62;break}return e.abrupt("return",new Promise((function(e,t){t({status:b.status,desc:"unauthorized"})})));case 62:return e.abrupt("return",new Promise((function(e,t){t({status:b.status,desc:"unknown"})})));case 63:case"end":return e.stop()}}),e,null,[[23,50]])})));return function(t,n,r,a,s){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r,a){var s,i,c,o,u,b,h,j,p,f,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new P.a(t.length),i=a.table(n),e.next=4,i.clear();case 4:c=[],o=Object(l.a)(t);try{for(o.s();!(u=o.n()).done;)b=u.value,h=q(b.geojson),j=s.add(h[0][1],h[0][0],h[1][1],h[1][0]),(p={}).gid=j,p.data=b,c.push(p)}catch(r){o.e(r)}finally{o.f()}return e.next=9,i.bulkPut(c);case 9:return s.finish(),e.next=12,a.table("daq_meta").get({name:n});case 12:return f=e.sent,(x={}).pol_index=s.data,e.next=17,a.table("daq_meta").update(f.id,x);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r){var a,s,i,c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.table("anprechp"),e.next=3,a.clear();case 3:s=[],0,i=Object(l.a)(t);try{for(i.s();!(c=i.n()).done;)o=c.value,(u={}).id=o.id,u.data=o,s.push(u)}catch(n){i.e(n)}finally{i.f()}return e.next=9,a.bulkPut(s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r){var a,s,i,c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.table("zustaendigkeit"),e.next=3,a.clear();case 3:s=[],0,i=Object(l.a)(t);try{for(i.s();!(c=i.n()).done;)o=c.value,(u={}).id=o.id,u.tabelle=o.tabelle,u.referenz=o.referenz,u.referenzfeld=o.referenzfeld,u.data=o,s.push(u)}catch(n){i.e(n)}finally{i.f()}return e.next=9,a.bulkPut(s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),q=function(e){var t=N.a.bbox(e);return[[t[1],t[0]],[t[3],t[2]]]},J=n(413),U=n(10),H={StoerfallBetriebeKlasse1:"betrieb",StoerfallBetriebeKlasse2:"betrieb",wasserverbaende:"name",wasserschutzgebiete:"zone",autobahnmeisterei:"bezirk",landschaftsschutzgebiete:"sg_typ",naturschutzgebiete:"sg_nummer",strassenmeisterei:"bezirk",bimschNrw:"astnr",bimschWuppertal:"astnr",trinkwasserbrunnen:"str_name",stadtFlurstuecke:"dienststellen"},V={StoerfallBetriebeKlasse1:"stoerfallbetriebe_klasse1",StoerfallBetriebeKlasse2:"stoerfallbetriebe_klasse2",wasserverbaende:"wasserverbaende",wasserschutzgebiete:"wasserschutzgebiete",autobahnmeisterei:"autobahnmeisterei",landschaftsschutzgebiete:"landschaftsschutzgebiete",naturschutzgebiete:"naturschutzgebiete",strassenmeisterei:"strassenmeisterei",bimschNrw:"bimsch_nrw",bimschWuppertal:"bimsch_wuppertal",trinkwasserbrunnen:"trinkwasserbrunnen",stadtFlurstuecke:"stadt_flurstuecke"},Y=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r){var a,s,i,c,o,u,b,h,j,f,x,v,m,g,O,y,k,w,z,S,A,B,_,L,C,D,F,I,T,K,W,N;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s=q(r),i=t.table("anprechp"),c=t.table("zustaendigkeit"),o=null,u=null,b=null,h=null,j=[],f=[],x=Object(l.a)(n),e.prev=11,x.s();case 13:if((v=x.n()).done){e.next=111;break}return m=v.value,e.next=17,t.table("daq_meta");case 17:if(!(g=e.sent)){e.next=109;break}return e.next=21,g.get({name:m});case 21:return O=e.sent,e.next=24,t.table(m);case 24:if(y=e.sent,!O){e.next=109;break}if(null==(k=O.pol_index)){e.next=109;break}if(w=P.a.from(k),null==(z=w.search(s[0][1],s[0][0],s[1][1],s[1][0]))){e.next=109;break}S=Object(l.a)(z),e.prev=32,S.s();case 34:if((A=S.n()).done){e.next=101;break}return B=A.value,e.next=38,y.get(B);case 38:if(null==(_=e.sent)){e.next=99;break}if((L=_.data).typ=m,C=L.geojson,!Object(p.a)(C,r)){e.next=99;break}if("trinkwasserbrunnen"!==m){e.next=52;break}return D=Q(r,C),e.next=48,X(m,L,i,c);case 48:L.abstand=Math.round(D),null===u||u>D?(null!==o&&f.push(o),o=L,u=D):f.push(L),e.next=98;break;case 52:if("bimschNrw"!==m&&"bimschWuppertal"!==m){e.next=60;break}return D=Q(r,C),e.next=56,X(m,L,i,c);case 56:L.abstand=Math.round(D),null===h||h>D?(null!==b&&j.push(b),b=L,h=D):j.push(L),e.next=98;break;case 60:if("stadtFlurstuecke"!==m){e.next=95;break}if(!((F=L.dienststellen.split("#")).length>1)){e.next=90;break}I=L.dienststellen,T=[],K=Object(l.a)(F),e.prev=66,K.s();case 68:if((W=K.n()).done){e.next=77;break}return N=W.value,L.dienststellen=N,delete L.ansprechpartner,e.next=74,X(m,L,i,c);case 74:void 0!=L.ansprechpartner&&T.push(L.ansprechpartner);case 75:e.next=68;break;case 77:e.next=82;break;case 79:e.prev=79,e.t0=e.catch(66),K.e(e.t0);case 82:return e.prev=82,K.f(),e.finish(82);case 85:L.dienststellen=I,L.ansprechpartner=T,a.push(L),e.next=93;break;case 90:return e.next=92,X(m,L,i,c);case 92:a.push(L);case 93:e.next=98;break;case 95:return e.next=97,X(m,L,i,c);case 97:a.push(L);case 98:L.default_name=L[H[m]];case 99:e.next=34;break;case 101:e.next=106;break;case 103:e.prev=103,e.t1=e.catch(32),S.e(e.t1);case 106:return e.prev=106,S.f(),e.finish(106);case 109:e.next=13;break;case 111:e.next=116;break;case 113:e.prev=113,e.t2=e.catch(11),x.e(e.t2);case 116:return e.prev=116,x.f(),e.finish(116);case 119:return null!==o&&(a.push(o),f.sort(Z),Array.prototype.push.apply(a,f)),null!==b&&(a.push(b),j.sort(Z),Array.prototype.push.apply(a,j)),a&&(a=a.filter((function(e,t,n){if("StoerfallBetriebeKlasse2"===e.typ){var r,s=Object(l.a)(a);try{for(s.s();!(r=s.n()).done;){var i=r.value;if("StoerfallBetriebeKlasse1"===i.typ&&i.betrieb===e.betrieb)return!1}}catch(c){s.e(c)}finally{s.f()}return!0}return!0}))),e.abrupt("return",a);case 123:case"end":return e.stop()}}),e,null,[[11,113,116,119],[32,103,106,109],[66,79,82,85]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Z=function(e,t){return e.abstand<t.abstand?-1:e.abstand>t.abstand?1:0},Q=function(e,t){var n=[e.geometry.coordinates[0],e.geometry.coordinates[1]],r=Object(U.default)(U.default.defs("EPSG:3857"),U.default.defs("EPSG:4326"),n),a=Object(f.a)(t),s=[a.geometry.coordinates[0],a.geometry.coordinates[1]],i=Object(U.default)(U.default.defs("EPSG:3857"),U.default.defs("EPSG:4326"),s);return 1e3*Object(J.a)(r,i,{unit:"kilometers"})*1.6},X=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r,a){var s,i,c,l,o,u,b,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=V[t],i=Object.keys(n),c=!1,l=0,o=i;case 4:if(!(l<o.length)){e.next=19;break}if("geojson"===(u=o[l])||void 0==n[u]){e.next=16;break}return e.next=9,a.get({tabelle:s,referenz:n[u],referenzfeld:u});case 9:if(!(b=e.sent)){e.next=16;break}return e.next=13,r.get({id:""+b.data.ansprechpartner});case 13:return(h=e.sent)&&($(h.data),n.ansprechpartner=h.data,c=!0),e.abrupt("break",19);case 16:l++,e.next=4;break;case 19:if(!1!==c){e.next=28;break}return e.next=22,a.get({tabelle:s,referenz:"null",referenzfeld:"null"});case 22:if(!(b=e.sent)){e.next=28;break}return e.next=26,r.get({id:""+b.data.ansprechpartner});case 26:(h=e.sent)&&($(h.data),n.ansprechpartner=h.data);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),$=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];null===e[r]&&(e[r]=void 0)}},ee=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var r,a,s,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,a=Object(l.a)(n),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=21;break}return i=s.value,e.next=8,t.table("daq_meta");case 8:if(null==(c=e.sent)){e.next=19;break}return e.next=12,c.get({name:i});case 12:if(null==(o=e.sent)){e.next=17;break}r=o.time,e.next=19;break;case 17:return console.log("offline data for key "+i+" not available"),e.abrupt("return",null);case 19:e.next=4;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[2,23,26,29]])})));return function(t,n){return e.apply(this,arguments)}}(),te=(n(799),n(801),n(15)),ne=n(11),re=(n(165),n(83)),ae=n(225),se=n.n(ae),ie=function(e){var t=e.hits,n=Object(r.useContext)(O.a).collapsedInfoBox,a=Object(r.useContext)(O.b),s=a.setCollapsedInfoBox,i=a.setSecondaryInfoVisible,c={},o=0;if(Array.isArray(t)){var d,u=Object(l.a)(t);try{for(u.s();!(d=u.n()).done;){var b=d.value;switch(b.typ){case"trinkwasserbrunnen":void 0===c.brunnen&&(c.brunnen=[]),c.brunnen.push(b);break;case"bimschNrw":case"bimschWuppertal":void 0===c.bimsch&&(c.bimsch=[]),c.bimsch.push(b);break;case"strassenmeisterei":void 0===c.strassenmeisterei&&(c.strassenmeisterei=[]),c.strassenmeisterei.push(b);break;case"naturschutzgebiete":case"landschaftsschutzgebiete":void 0===c.schutzgebiete&&(c.schutzgebiete=[]),c.schutzgebiete.push(b);break;case"autobahnmeisterei":void 0===c.autobahnmeisterei&&(c.autobahnmeisterei=[]),c.autobahnmeisterei.push(b);break;case"wasserschutzgebiete":void 0===c.wasserschutzgebiete&&(c.wasserschutzgebiete=[]),c.wasserschutzgebiete.push(b);break;case"wasserverbaende":void 0===c.verbaende&&(c.verbaende=[]),c.verbaende.push(b);break;case"StoerfallBetriebeKlasse1":case"StoerfallBetriebeKlasse2":void 0===c.stoerfallbetriebe&&(c.stoerfallbetriebe=[]),c.stoerfallbetriebe.push(b);break;case"stadtFlurstuecke":void 0===c.stadtFlurstuecke&&(c.stadtFlurstuecke=[]),o+=b.dienststellen.split("#").length,c.stadtFlurstuecke.push(b)}}}catch(y){u.e(y)}finally{u.f()}}var h=Object(C.jsx)("table",{style:{width:"100%"},children:Object(C.jsx)("tbody",{children:Object(C.jsx)("tr",{children:Object(C.jsx)("td",{style:{textAlign:"left",verticalAlign:"top",background:"grey",color:"black",opacity:"0.9",paddingLeft:"0px",paddingTop:"0px",paddingBottom:"0px"},children:Object(C.jsxs)("span",{children:[" Analyseergebnis: (",Array.isArray(t)?t.length:"-",")"]})})})})}),j=30,p={border:0,borderStyle:"solid",fontSize:j,textAlign:"center",flexGrow:1},f={border:0,borderStyle:"solid",fontSize:j,textAlign:"center",color:"#dddddd",flexGrow:1},x={fontSize:12,minHeight:"18px"},v={display:"grid",gridGap:"5px",gridTemplateColumns:"repeat(3, 1fr)",verticalAlign:"center"};!0===n&&(j=23,x={fontSize:9,minHeight:"15px"},v={display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",verticalAlign:"center",alignContent:"space-around"});var g=Object(C.jsx)("div",{style:{paddingRight:9},onClick:function(){i(!0)},children:Object(C.jsx)(se.a,{active:void 0===t,spinner:!0,text:"Suchen",children:Object(C.jsxs)("div",{style:v,children:[Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.brunnen)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.s}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.brunnen)?(null===c||void 0===c?void 0:c.brunnen[0].abstand)+" m"+((null===c||void 0===c?void 0:c.brunnen.length)>1?" (+"+((null===c||void 0===c?void 0:c.brunnen.length)-1)+")":""):""})]}),Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.bimsch)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.x}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.bimsch)?("bimschNrw"===(null===c||void 0===c?void 0:c.bimsch[0].typ)?"BRD - ":"UIB - ")+(null===c||void 0===c?void 0:c.bimsch[0].abstand)+" m"+((null===c||void 0===c?void 0:c.bimsch.length)>1?" (+"+((null===c||void 0===c?void 0:c.bimsch.length)-1)+")":""):""})]}),Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.wasserschutzgebiete)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.v}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.wasserschutzgebiete)?"Zone: "+(null===c||void 0===c?void 0:c.wasserschutzgebiete[0].default_name)+((null===c||void 0===c?void 0:c.wasserschutzgebiete.length)>1?" (+"+((null===c||void 0===c?void 0:c.wasserschutzgebiete.length)-1)+")":""):""})]}),Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.stoerfallbetriebe)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.q}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.stoerfallbetriebe)?(null===c||void 0===c?void 0:c.stoerfallbetriebe[0].default_name)+("StoerfallBetriebeKlasse1"===(null===c||void 0===c?void 0:c.stoerfallbetriebe[0].typ)?"-A1":"-A2")+((null===c||void 0===c?void 0:c.stoerfallbetriebe.length)>1?" (+"+((null===c||void 0===c?void 0:c.stoerfallbetriebe.length)-1)+")":""):""})]}),Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.stadtFlurstuecke)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.n}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.stadtFlurstuecke)?(null===c||void 0===c?void 0:c.stadtFlurstuecke[0].default_name.split("#")[0])+(o>1?" (+"+(o-1)+")":""):""})]}),Object(C.jsxs)("div",{style:void 0!==(null===c||void 0===c?void 0:c.schutzgebiete)?p:f,children:[Object(C.jsx)(re.a,{style:{fontSize:j},icon:ne.K}),Object(C.jsx)("div",{style:x,children:void 0!==(null===c||void 0===c?void 0:c.schutzgebiete)?("naturschutzgebiete"===(null===c||void 0===c?void 0:c.schutzgebiete[0].typ)?"NSG":"LSG")+((null===c||void 0===c?void 0:c.schutzgebiete.length)>1?" (+"+((null===c||void 0===c?void 0:c.schutzgebiete.length)-1)+")":""):""})]})]})})});return Object(C.jsx)(m.a,{panelClick:function(){},pixelwidth:300,header:h,collapsedInfoBox:n,setCollapsedInfoBox:s,isCollapsible:!0,handleResponsiveDesign:!0,infoStyle:{padding:"0px"},secondaryInfoBoxElements:void 0,alwaysVisibleDiv:n?g:Object(C.jsx)("div",{}),collapsibleDiv:n?Object(C.jsx)("div",{}):g,fixedRow:!0})},ce=n(34),le=n(248),oe=n(417),de=n(68),ue=function(e){var t={};if(e){var n,r=Object(l.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;void 0===a.ansprechpartner&&(a.ansprechpartner={firma:"",name:""}),t[a.typ]?t[a.typ].push(a):t[a.typ]=[a]}}catch(s){r.e(s)}finally{r.f()}}return t},be=Object(C.jsx)("div",{style:{fontSize:"11px"},children:Object(C.jsxs)("div",{children:[Object(C.jsxs)("b",{children:[document.title," v",L()]}),":"," ",Object(C.jsx)("a",{href:"https://cismet.de/",target:"_cismet",children:"cismet GmbH"})," ","auf Basis von"," ",Object(C.jsx)("a",{href:"http://leafletjs.com/",target:"_more",children:"Leaflet"})," ","und"," ",Object(C.jsxs)("a",{href:"https://cismet.de/#refs",target:"_cismet",children:["cids | react-cismap v",A.a]})," ","|"," ",Object(C.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cismet.de/datenschutzerklaerung.html",children:"Datenschutzerkl\xe4rung (Privacy Policy)"})]})}),he=function(e){var t=[];return e.tel&&t.push(Object(C.jsx)("span",{style:{padding:4},children:Object(C.jsx)(de.a,{tooltip:"Ansprechpartner Anrufen",href:"tel:"+e.tel,iconname:"phone"},"IconLink.tel")})),e.email&&t.push(Object(C.jsx)("span",{style:{padding:4},children:Object(C.jsx)(de.a,{tooltip:"E-Mail an Ansprechpartner schreiben",href:"mailto:"+e.email,iconname:"envelope-square",target:"_blank"},"IconLink.email")})),e.url&&t.push(Object(C.jsx)("span",{style:{padding:4},children:Object(C.jsx)(de.a,{tooltip:"Webseite",href:e.url,target:"_blank",iconname:"external-link-square"},"IconLink.web")})),t},je=function(e){return Array.isArray(e)?Object(C.jsx)("div",{children:e.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsx)("div",{style:{paddingLeft:10,paddingRight:10,float:"right",paddingBottom:"5px"},children:he(e)}),Object(C.jsx)("div",{children:e.firma}),Object(C.jsx)("div",{children:e.name}),Object(C.jsx)("div",{children:e.bemerkung})]},"ansprech_"+t)}))}):Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{style:{paddingLeft:10,paddingRight:10,float:"right",paddingBottom:"5px"},children:he(e)}),Object(C.jsx)("div",{children:e.firma}),Object(C.jsx)("div",{children:e.name}),Object(C.jsx)("div",{children:e.bemerkung})]})},pe=function(e,t){var n=e.split("#");return Object(C.jsx)("span",{children:n.map((function(e,r){var a=e===t.firma.trim()&&n.length>1?{borderBottom:"1px solid black"}:{};return Object(C.jsxs)("span",{style:a,children:[r>0?", ":"",e]})}))})},fe=function(e){return Object(C.jsx)("div",{style:{width:"100%",height:"12px",borderBottom:"1px solid #eeeeee",textAlign:"center",marginBottom:"15px",marginTop:"5px"},children:Object(C.jsx)("span",{style:{fontSize:"16px",backgroundColor:"#FFFFFF",xcolor:"#aaa",padding:"0 10px"},children:e})})},xe=function(e){var t=e.hits,n=Object(r.useContext)(h.a).history,a=new URLSearchParams(n.location.search).get("lat"),s=new URLSearchParams(n.location.search).get("lng"),i=null!==new URLSearchParams(n.location.search).get("showRawData"),c=ue(t);if(void 0!==t){var o=[],d=function(e,t,n){return t&&void 0===n&&!1===Array.isArray(t)?Object(C.jsxs)("div",{children:[Object(C.jsxs)("b",{children:[e,":"]})," ",t]}):t&&void 0===n&&!0===Array.isArray(t)?Object(C.jsxs)("div",{children:[Object(C.jsxs)("b",{children:[e,":"]})," ",t.join(", ")]}):t&&void 0!==n?Object(C.jsxs)("div",{children:[Object(C.jsxs)("b",{children:[e,":"]})," ",n(t)]}):void 0};if(void 0!==t){if((c.wasserverbaende||c.autobahnmeisterei||c.strassenmeisterei||c.stadtFlurstuecke)&&o.push(Object(C.jsxs)(le.a,{bsStyle:"success",header:"Zust\xe4ndigkeiten",children:[c.wasserverbaende&&fe("Wasserverband"),c.wasserverbaende&&c.wasserverbaende.map((function(e,t){return Object(C.jsx)("div",{children:e.ansprechpartner&&je(e.ansprechpartner)},"wasserverbaende_"+t)})),c.autobahnmeisterei&&fe("Autobahnmeisterei"),c.autobahnmeisterei&&c.autobahnmeisterei.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"autm_"+t)})),c.strassenmeisterei&&fe("Stra\xdfenmeisterei"),c.strassenmeisterei&&Object(C.jsx)("div",{children:c.strassenmeisterei[0].ansprechpartner&&je(c.strassenmeisterei[0].ansprechpartner)}),c.stadtFlurstuecke&&fe("Stadt Wuppertal"),c.stadtFlurstuecke&&c.stadtFlurstuecke.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Flurst\xfcck: "}),e.flurstueck]}),Object(C.jsxs)("div",{children:[e.dienststellen.split("#").length>1&&Object(C.jsx)("b",{children:"Dienststellen: "}),e.dienststellen.split("#").length<=1&&Object(C.jsx)("b",{children:"Dienststelle: "}),pe(e.dienststellen,Array.isArray(e.ansprechpartner)?e.ansprechpartner[0]:e.ansprechpartner)]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(Array.isArray(e.ansprechpartner)?e.ansprechpartner[0]:e.ansprechpartner)]},"stadtFlurstuecke_"+t)}))]},"standort")),c.trinkwasserbrunnen||c.bimschWuppertal||c.bimschNrw||c.wasserschutzgebiete||c.naturschutzgebiete||c.landschaftsschutzgebiete||c.StoerfallBetriebeKlasse1||c.StoerfallBetriebeKlasse2){o.push(Object(C.jsxs)(le.a,{bsStyle:"primary",header:"Schutzgebiete und Anlagen",children:[c.trinkwasserbrunnen&&fe("Trinkwasserbrunnen"),c.trinkwasserbrunnen&&c.trinkwasserbrunnen.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Abstand: "}),e.abstand," m"]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Adresse: "}),e.str_name+" "+e.hsnr+(e.zusatz?e.zusatz:"")]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"trinkwasserbrunnen_"+t)})),c.bimschWuppertal&&fe("BImschG-Anlage Wuppertal"),c.bimschWuppertal&&c.bimschWuppertal.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Betrieb: "}),e.b_firma1]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Anlage: "}),e.anlag_bez]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"bimschWupp_"+t)})),c.bimschNrw&&fe("BImschG-Anlage NRW"),c.bimschNrw&&c.bimschNrw.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Betrieb: "}),e.b_firma1]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Anlage: "}),e.anlag_bez]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"bimschNrw_"+t)})),c.wasserschutzgebiete&&fe("Wasserschutzgebiet"),c.wasserschutzgebiete&&c.wasserschutzgebiete.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Schutzzone: "}),e.zone]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"wasser_"+t)})),c.naturschutzgebiete&&fe("Naturschutzgebiet"),c.naturschutzgebiete&&c.naturschutzgebiete.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsx)("div",{children:e.nrw_name}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Objektkennung: "}),e.nrw_nummer]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"natur_"+t)})),c.landschaftsschutzgebiete&&fe("Landschaftsschutzgebiet"),c.landschaftsschutzgebiete&&c.landschaftsschutzgebiete.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Schutzgebietstyp: "}),"LS"===e.sg_typ?"Landschaftsschutzgebiet":e.sg_typ]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"landschaft_"+t)})),c.StoerfallBetriebeKlasse1&&fe("St\xf6rfallbetrieb Abstandsklasse 1"),c.StoerfallBetriebeKlasse1&&c.StoerfallBetriebeKlasse1.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Betrieb: "}),e.betrieb]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Lage: "}),e.lage]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"stoer1_"+t)})),c.StoerfallBetriebeKlasse2&&fe("St\xf6rfallbetrieb Abstandsklasse 2"),c.StoerfallBetriebeKlasse2&&c.StoerfallBetriebeKlasse2.map((function(e,t){return Object(C.jsxs)("div",{children:[t>0&&Object(C.jsx)("br",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Betrieb: "}),e.betrieb]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Lage: "}),e.lage]}),Object(C.jsx)("br",{}),e.ansprechpartner&&je(e.ansprechpartner)]},"stoer2_"+t)}))]},"standort"))}if(i){var u,b=JSON.parse(JSON.stringify(t)),j=Object(l.a)(b);try{for(j.s();!(u=j.n()).done;){delete u.value.geojson}}catch(f){j.e(f)}finally{j.f()}var p=ue(b);o.push(Object(C.jsx)(le.a,{bsStyle:"info",header:"Trefferobjekte (Raw Data ohne Geometrie): "+t.length+" Treffer",children:Object(C.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(C.jsx)("pre",{children:JSON.stringify(p,null,2)},"hitObject")})},"standort"))}}return Object(C.jsx)(oe.a,{titleIconName:"info-circle",title:"Datenblatt zu: "+Math.round(1e4*a)/1e4+", "+Math.round(1e3*s)/1e3,mainSection:Object(C.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(C.jsxs)("div",{children:["Die Suche an der angegebene Position hat insgesamt ",t.length," Treffer ergeben:",d("Bezeichnung",null===t||void 0===t?void 0:t.bezeichnung),d("Fl\xe4chengr\xf6\xdfe",null===t||void 0===t?void 0:t.groesse,(function(e){return Object(C.jsxs)("span",{children:[e.toLocaleString()," m\xb2 (circa"," ",(Math.round(e/1e4*10)/10).toLocaleString()," ha)"]})})),d("Stadtbezirk(e)",null===t||void 0===t?void 0:t.stadtbezirke,(function(e){return e.join(", ")})),d("Quartier(e)",null===t||void 0===t?void 0:t.quartiere,(function(e){return e.join(", ")})),d("Eigent\xfcmer",null===t||void 0===t?void 0:t.eigentuemer,(function(e){return e.join(", ")}))]})}),subSections:o,footer:be})}return null},ve="https://wupp-topicmaps-data.cismet.de",me=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="GazDataForStories",a={},e.next=4,Object(x.d)(r,ve+"/data/3857/adressen.json");case 4:return a.adressen=e.sent,e.next=7,Object(x.d)(r,ve+"/data/3857/bezirke.json");case 7:return a.bezirke=e.sent,e.next=10,Object(x.d)(r,ve+"/data/3857/quartiere.json");case 10:return a.quartiere=e.sent,e.next=13,Object(x.d)(r,ve+"/data/3857/pois.json");case 13:return a.pois=e.sent,e.next=16,Object(x.d)(r,ve+"/data/3857/kitas.json");case 16:a.kitas=e.sent,s=Object(v.b)(a,["pois","kitas","bezirke","quartiere","adressen"]),t(s);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var ge=function(e){var t=e.loggedOut,n=e.initialised,a=Object(r.useState)([]),s=Object(b.a)(a,2),i=s[0],c=s[1],l=Object(r.useState)([]),o=Object(b.a)(l,2),d=(o[0],o[1]),u=Object(r.useState)([]),h=Object(b.a)(u,2),p=h[0],x=h[1],v=Object(r.useContext)(I.a).windowSize;return Object(r.useEffect)((function(){me(c,d)}),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(T,{}),Object(C.jsx)(g.a,{gazData:i,modalMenu:Object(C.jsx)(F,{}),homeZoom:13,maxZoom:22,secondaryInfo:v&&Object(C.jsx)(xe,{hits:p}),locatorControl:!0,mappingBoundsChanged:function(e){x(void 0);var t=[e.left,e.bottom,e.right,e.top],n=Object(j.a)(t),r=Object(f.a)(n);Y(Ge,Me,r).then((function(e){x(e)}))},children:!t&&Object(C.jsx)(ie,{hits:p})})]},null!=n?n:"init")},Oe=n(117),ye=n(129),ke=n(74),we=n(17),ze=n.n(we),Se=n(180),Ae=n(806),Be=n(111),_e=n(296),Le=n.n(_e),Ce=n(414),De=n.n(Ce);Le.a.extend(De.a);var Fe=function(e){var t=e.setJWT,n=void 0===t?function(e){console.log("you need to set the attribute setJWT in the <Login> component",e)}:t,a=e.loginInfo,s=e.setLoginInfo,i=void 0===s?function(){}:s,c=Object(r.useContext)(I.a).windowSize,l=Object(r.useContext)(ce.b).setMetaInformation,o=Object(r.useRef)(),h=Object(r.useRef)(),j={overflowY:"auto",overflowX:"hidden",maxHeight:(null===c||void 0===c?void 0:c.height)||620},p=Object(r.useState)(""),f=Object(b.a)(p,2),v=f[0],m=f[1],g=Object(r.useState)(""),O=Object(b.a)(g,2),y=O[0],k=O[1],w=Object(r.useState)(!1),z=Object(b.a)(w,2),S=z[0],A=z[1];window.localforage=ze.a;var B=function(e){ze.a.setItem("@"+Ne+".auth.user",e),m(e)};Object(r.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.a.getItem("@"+Ne+".auth.user");case 2:return t=e.sent,e.next=5,ee(Ge,Me);case 5:n=e.sent,console.log("xxx o"+n),console.log("xxx offData"+(null!==n&&void 0!==n)),A(null!==n&&void 0!==n),null!==n&&void 0!==n&&(r=Le()(n,"YYYY-MM-DD hh:mm:ss").toDate(),l({time:r})),t&&B(t),(null===h||void 0===h?void 0:h.current)&&(h.current.focus(),h.current.select());case 12:case"end":return e.stop()}}),e)})))()}),[]);var _=function(){fetch("https://umweltalarm-api.cismet.de/users",{method:"GET",headers:{Authorization:"Basic "+btoa(v+"@WUNDA_BLAU:"+y),"Content-Type":"application/json"}}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){var t=e.jwt;i({color:"#79BD9A",text:"Anmeldung erfolgreich. Daten werden geladen."}),setTimeout((function(){n(t),i()}),500)})):(i({color:"#FF8048",text:"Bei der Anmeldung ist ein Fehler aufgetreten. "}),setTimeout((function(){i()}),2500))})).catch((function(e){i({color:"#FF3030",text:"Bei der Anmeldung ist ein Fehler aufgetreten."}),setTimeout((function(){i()}),2500)}))};return Object(C.jsxs)(Se.a,{style:{zIndex:3e9},height:"100%",size:"l",show:!0,keyboard:!1,children:[Object(C.jsx)(Se.a.Header,{children:Object(C.jsx)(Se.a.Title,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{children:[Object(C.jsx)(te.a,{name:"user"})," Anmeldung"]})})})}),Object(C.jsx)(Se.a.Body,{style:j,id:"potenzialflaechen-online",children:Object(C.jsxs)(Ae.a,{children:[Object(C.jsxs)(Ae.a.Group,{controlId:"potenzialflaechen-online-login",children:[Object(C.jsx)(Ae.a.Label,{children:"WuNDa Benutzername"}),Object(C.jsx)(Ae.a.Control,{value:v,ref:h,onChange:function(e){B(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&o.current&&o.current.focus()},placeholder:"Login hier eingeben"})]}),Object(C.jsxs)(Ae.a.Group,{controlId:"potenzialflaechen-online-pass",children:[Object(C.jsx)(Ae.a.Label,{children:"Passwort"}),Object(C.jsx)(Ae.a.Control,{ref:o,value:y,onChange:function(e){k(e.target.value)},type:"password",placeholder:"Password",onKeyPress:function(e){"Enter"===e.key&&_()}})]}),Object(C.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"baseline",flexDirection:"row",justifyContent:"space-between"},children:[(null===a||void 0===a?void 0:a.text)&&Object(C.jsx)("div",{style:{margin:10,color:(null===a||void 0===a?void 0:a.color)||"black",maxWidth:200},children:Object(C.jsx)("b",{children:null===a||void 0===a?void 0:a.text})}),Object(C.jsx)("div",{style:{flexShrink:100}}),Object(C.jsxs)("div",{children:[!0===S&&Object(C.jsx)(Be.a,{onClick:function(e){i({color:"#79BD9A",text:"Alte Daten werden aus dem Cache \xfcbernommen."}),setTimeout((function(){n(x.a),i()}),500)},style:{margin:5,marginTop:30},variant:"secondary",children:"Offline arbeiten"}),Object(C.jsx)(Be.a,{onClick:function(e){_()},style:{margin:5,marginTop:30},variant:"primary",children:"Anmeldung"})]})]})]})},"login")]})},Ie=n(415),Te=n.n(Ie),Ke=function(e){var t=e.waiting,n=Object(r.useContext)(ce.a).selectedFeature;return Object(C.jsxs)(Se.a,{style:{zIndex:3e9},height:"200",size:"s",show:void 0!==t,keyboard:!1,children:[Object(C.jsx)(Se.a.Header,{children:Object(C.jsxs)(Se.a.Title,{children:[Object(C.jsx)(te.a,{name:null===t||void 0===t?void 0:t.icon})," ",null===t||void 0===t?void 0:t.title]})}),Object(C.jsx)(Se.a.Body,{children:Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline"},children:[Object(C.jsx)(Te.a,{type:"cylon",color:null===n||void 0===n?void 0:n.properties.color})," ",Object(C.jsx)("div",{style:{marginLeft:20},children:null===t||void 0===t?void 0:t.text})]})})]})},Pe=function(e){var t,n,a,s,i=e.logout,c=e.jwt,l=Object(r.useContext)(I.a).windowSize,o=Object(r.useContext)(ce.a).metaInformation;if(o){var d=o.time;t=new Date(d).toLocaleString()}if(c===x.a)n="Daten aus dem Cache",s="anmelden und Daten aktualisieren";else try{a=atob(c.split(".")[1]),n=JSON.parse(a).sub,s="abmelden"}catch(b){}var u=Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"Umweltalarm"})," (",n+(void 0!==t?", "+t:""),")",Object(C.jsx)("div",{style:{float:"right",paddingRight:10},children:Object(C.jsx)("a",{style:{color:"#337ab7"},onClick:function(){i()},children:s})})]});return Object(C.jsx)("table",{style:{width:((null===l||void 0===l?void 0:l.width)||300)-54-12-38-12+"px",height:"30px",position:"absolute",left:54,top:12,zIndex:555},children:Object(C.jsx)("tbody",{children:Object(C.jsx)("tr",{children:Object(C.jsx)("td",{style:{textAlign:"center",verticalAlign:"middle",background:"#ffffff",color:"black",opacity:"0.9",paddingLeft:"10px"},children:u})})})})},We=n(153),Ne="umweltalarm.Online.Wuppertal",Ee="https://umweltalarm-api.cismet.de",Me=["StoerfallBetriebeKlasse1","StoerfallBetriebeKlasse2","wasserverbaende","wasserschutzgebiete","autobahnmeisterei","landschaftsschutzgebiete","naturschutzgebiete","strassenmeisterei","bimschNrw","bimschWuppertal","trinkwasserbrunnen","stadtFlurstuecke"],Ge=function(e,t){var n,r=new K.a(e),a={},s=Object(l.a)(t);try{for(s.s();!(n=s.n()).done;){a[n.value]="gid"}}catch(i){s.e(i)}finally{s.f()}return a.daq_meta="++id,name,md5,time",a.anprechp="id",a.zustaendigkeit="id,tabelle,referenzfeld,referenz,[tabelle+referenzfeld+referenz]",r.version(10).stores(a),r}(Ne,Me);var Re=function(){var e;Object(r.useEffect)((function(){document.title="Umweltalarm Wuppertal"}),[]);var t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(),o=Object(b.a)(i,2),j=o[0],p=o[1],f=Object(r.useState)(),x=Object(b.a)(f,2),v=x[0],m=(x[1],Object(r.useState)()),g=Object(b.a)(m,2),O=g[0],y=g[1],k=Object(r.useState)(),w=Object(b.a)(k,2),z=w[0],S=w[1],A=0,B=!1,_=function(e){ze.a.setItem("@"+Ne+".auth.jwt",e),s(e)};Object(r.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.a.getItem("@"+Ne+".auth.jwt");case 2:(t=e.sent)?(_(t),p(!1)):(_(void 0),p(!0));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){if(a){var e,t=Object(l.a)(Me);try{for(t.s();!(e=t.n()).done;){var n=e.value;E(Ne,Ee,a,n,Ge).then((function(e){++A,e.data&&Array.isArray(e.data)&&(B=!0),A>Me.length-1&&!0===B&&S("initialised complete")}),(function(e){401===e.status&&(_(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)}))}}catch(r){t.e(r)}finally{t.f()}E(Ne,Ee,a,"ansprechpartner",Ge).then((function(e){void 0!==e&&Array.isArray(e.data)&&G(e.data,"ansprechpartner",Ge)}),(function(e){401===e.status&&(_(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)})),E(Ne,Ee,a,"ansprechpartnerZustaendigkeit",Ge).then((function(e){void 0!==e&&Array.isArray(e.data)&&(console.log("Ansprechpartner referenz"),R(e.data,"ansprechpartnerZustaendigkeit",Ge))}),(function(e){401===e.status&&(_(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)})),p(!1)}else p(!0)}),[a]),e=-1===Object(ye.a)()?[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Stadtplan (Vektordaten light)",mode:"default",layerKey:"vector"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}]:[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}];var L=Object(c.a)({},ke.b);return void 0==L.namedLayers.cismetLight&&(L.namedLayers.cismetLight={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-light/style.json",pane:"backgroundvectorLayers"}),void 0==L.namedLayers.cismetText&&(L.namedLayers.cismetText={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-text/style.json",pane:"backgroundlayerTooltips"}),Object(C.jsxs)(h.c,{persistenceSettings:{ui:["XappMenuVisible","appMenuActiveMenuSection","collapsedInfoBox"],featureCollection:["filterState","filterMode","clusteringEnabled"],responsive:[],styling:["activeAdditionalLayerKeys","namedMapStyle","selectedBackground","markerSymbolSize"]},additionalLayerConfiguration:{brunnen:{title:Object(C.jsx)("span",{children:"Trinkwasserbrunnen"}),initialActive:!0,layer:Object(C.jsx)(We.a,{style_:"http://localhost:888/styles/brunnen/style.json",style:"https://omt.map-hosting.de/styles/brunnen/style.json",pane:"additionalLayers0"},"brunnen")},kanal:{title:Object(C.jsx)("span",{children:"Kanalnetz"}),initialActive:!0,layer:Object(C.jsx)(We.a,{style_:"http://localhost:888/styles/kanal/style.json",style:"https://omt.map-hosting.de/styles/kanal/style.json",pane:"additionalLayers1"},"kanal")},gewaesser:{title:Object(C.jsx)("span",{children:"Gew\xe4ssernetz"}),initialActive:!0,layer:Object(C.jsx)(We.a,{style_:"http://localhost:888/styles/gewaesser/style.json",style:"https://omt.map-hosting.de/styles/gewaesser/style.json",pane:"additionalLayers2"},"gewaesser")}},baseLayerConf:L,backgroundConfigurations:{lbk:{layerkey:"cismetText|trueOrtho2020@40",layerkey_:"wupp-plan-live@100|trueOrtho2020@75|rvrSchrift@100",src:"/images/rain-hazard-map-bg/ortho.png",title:"Luftbildkarte"},stadtplan:{layerkey:"wupp-plan-live@60",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},vector:{layerkey:"cismetLight",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"}},backgroundModes:e,referenceSystem:Oe.b.crs3857,mapEPSGCode:"3857",referenceSystemDefinition:Oe.b.proj4crs3857def,maskingPolygon:"POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))",children:[j&&void 0===a&&Object(C.jsx)(Fe,{setJWT:_,loginInfo:O,setLoginInfo:y},"login."),!j&&Object(C.jsx)(Pe,{logout:function(){_(void 0),p(!0),y({color:"#69D2E7",text:"Sie wurden erfolgreich abgemeldet."}),setTimeout((function(){y()}),2500)},jwt:a}),Object(C.jsx)(Ke,{waiting:v}),Object(C.jsx)(ge,{loggedOut:j,initialised:z})]})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,807)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(Re,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),qe()}},[[800,1,2]]]);
//# sourceMappingURL=main.9d5fad43.chunk.js.map