(this.webpackJsonpumweltalarm=this.webpackJsonpumweltalarm||[]).push([[0],{295:function(e,t,n){},421:function(e,t,n){},799:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(22),i=n.n(s),o=(n(421),n(8)),c=n(11),l=n(14),d=n.n(l),u=n(23),b=n(13),h=(n(295),n(296),n(297),n(298),n(299),n(30)),f=n(79),j=n(164),v=n(207),p=n(45),x=n(208),m=n(293),g=n(415),O=n(24),y=n(63),k=n(234),w=n(236),z=n(227),S=n(143),A=n(231),C=n(166),B="0.7.2",D=n(2),I=function(){var e=Object(a.useContext)(O.b).setAppMenuActiveMenuSection;return Object(D.jsxs)("div",{style:{fontSize:"11px"},children:[Object(D.jsx)("b",{children:"Hintergrundkarten"}),": Stadtkarte 2.0 \xa9 RVR | True Orthophoto 2020 \xa9 Stadt Wuppertal | Openmaptiles basierte Vectorkarte (hosted by cismet)"," ",Object(D.jsx)("a",{className:"pleaseRenderAsLink",onClick:function(){e("help"),C.scroller.scrollTo("Datengrundlage",{containerId:"myMenu"})},children:"(Details und Nutzungsbedingungen)"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("b",{children:[document.title," v",B]}),":"," ",Object(D.jsx)("a",{href:"https://cismet.de/",target:"_cismet",children:"cismet GmbH"})," ","auf Basis von"," ",Object(D.jsx)("a",{href:"http://leafletjs.com/",target:"_more",children:"Leaflet"})," ","und"," ",Object(D.jsxs)("a",{href:"https://cismet.de/#refs",target:"_cismet",children:["cids | react-cismap v",A.a]})," ","|"," ",Object(D.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cismet.de/datenschutzerklaerung.html",children:"Datenschutzerkl\xe4rung (Privacy Policy)"})]})]})},L=function(){Object(a.useContext)(O.b).setAppMenuActiveMenuSection;return Object(D.jsx)(z.a,{menuIcon:"bars",menuTitle:"Einstellungen und Kompaktanleitung",menuIntroduction:Object(D.jsxs)("span",{children:["\xdcber ",Object(D.jsx)("strong",{children:"Einstellungen"})," k\xf6nnen Sie die Darstellung der Hintergrundkarte und der Objekte an Ihre Vorlieben anpassen. W\xe4hlen Sie ",Object(D.jsx)("strong",{children:"Kompaktanleitung"})," f\xfcr detailliertere Bedienungsinformationen.enungsinformationen."]}),menuSections:[Object(D.jsx)(w.a,{skipFilterTitleSettings:!0,skipClusteringSettings:!0,skipSymbolsizeSetting:!0},"settings"),Object(D.jsx)(S.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(D.jsx)(k.a,{configs:Object(y.b)(document.title,undefined)})},"help")],menuFooter:Object(D.jsx)(I,{})})},_=n(26),T=function(){var e=Object(a.useContext)(_.a).windowSize;return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{style:{position:"absolute",top:((null===e||void 0===e?void 0:e.height)||500)/2-1,width:(null===e||void 0===e?void 0:e.width)||"100%",height:"2px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}}),Object(D.jsx)("div",{style:{position:"absolute",left:((null===e||void 0===e?void 0:e.width)||500)/2-1,height:(null===e||void 0===e?void 0:e.height)||"100%",width:"2px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}}),Object(D.jsx)("div",{style:{borderRadius:"50%",position:"absolute",left:((null===e||void 0===e?void 0:e.width)||500)/2-10,top:((null===e||void 0===e?void 0:e.height)||500)/2-10,height:"20px",width:"20px",backgroundColor:"#00000023",zIndex:"100000",pointerEvents:"none"}})]})},F=n(409),P=n(125),E=n(410),K=n.n(E),N=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a,r,s){var i,o,c,l,u,b,h,f,j,v,p,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.table("daq_meta").get({name:r});case 2:if(i=e.sent,o=null,null!=i&&(o=i.md5),console.log("DAQ for "+r),c={parameters:{daqKey:r,md5:o||"-"}},(l=new FormData).append("taskparams",new Blob([JSON.stringify(c)],{type:"application/json"})),"--cached--data--"!==a){e.next=15;break}return"data retrieved",u=i.time,e.abrupt("return",new Promise((function(e,t){e({data:"data retrieved",time:u})})));case 15:return e.next=17,fetch(n+"/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+a},body:l});case 17:if(!((b=e.sent).status>=200&&b.status<300)){e.next=58;break}return e.next=21,b.json();case 21:if(!(h=e.sent).res){e.next=55;break}if(e.prev=23,f=JSON.parse(h.res),200!==(j=f.status)){e.next=46;break}if(console.log("DAQ cache miss for "+r),v=JSON.parse(f.content),p=f.time,(x={}).md5=f.md5,x.time=p,x.name=r,console.log("new md5: "+x.md5),null==i){e.next=40;break}return e.next=38,s.table("daq_meta").update(i.id,x);case 38:e.next=41;break;case 40:s.table("daq_meta").add(x);case 41:if(!(v&&v[0]&&v[0].geojson)){e.next=44;break}return e.next=44,M(v,r,t,s);case 44:e.next=47;break;case 46:304===j&&(console.log("DAQ cache hit for "+r),null!=i&&(p=i.time,v="data retrieved"));case 47:return e.abrupt("return",new Promise((function(e,t){e({data:v,time:p})})));case 50:return e.prev=50,e.t0=e.catch(23),e.abrupt("return",new Promise((function(t,n){n({status:500,desc:"error when parsing the server result. probably the content has the wrong structure",content:h,exception:e.t0})})));case 53:e.next=56;break;case 55:return e.abrupt("return",new Promise((function(e,t){t({status:500,desc:"error when parsing the server result.",content:h})})));case 56:e.next=63;break;case 58:if(401!==b.status){e.next=62;break}return e.abrupt("return",new Promise((function(e,t){t({status:b.status,desc:"unauthorized"})})));case 62:return e.abrupt("return",new Promise((function(e,t){t({status:b.status,desc:"unknown"})})));case 63:case"end":return e.stop()}}),e,null,[[23,50]])})));return function(t,n,a,r,s){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a,r){var s,i,o,l,u,b,h,f,j,v,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new P.a(t.length),i=r.table(n),e.next=4,i.clear();case 4:o=[],l=Object(c.a)(t);try{for(l.s();!(u=l.n()).done;)b=u.value,h=G(b.geojson),f=s.add(h[0][1],h[0][0],h[1][1],h[1][0]),(j={}).gid=f,j.data=b,o.push(j)}catch(a){l.e(a)}finally{l.f()}return e.next=9,i.bulkPut(o);case 9:return s.finish(),e.next=12,r.table("daq_meta").get({name:n});case 12:return v=e.sent,(p={}).pol_index=s.data,e.next=17,r.table("daq_meta").update(v.id,p);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a){var r,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.table("anprechp"),e.next=3,r.clear();case 3:s=[],0,i=Object(c.a)(t);try{for(i.s();!(o=i.n()).done;)l=o.value,(u={}).id=l.id,u.data=l,s.push(u)}catch(n){i.e(n)}finally{i.f()}return e.next=9,r.bulkPut(s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a){var r,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.table("zustaendigkeit"),e.next=3,r.clear();case 3:s=[],0,i=Object(c.a)(t);try{for(i.s();!(o=i.n()).done;)l=o.value,(u={}).id=l.id,u.tabelle=l.tabelle,u.referenz=l.referenz,u.referenzfeld=l.referenzfeld,u.data=l,s.push(u)}catch(n){i.e(n)}finally{i.f()}return e.next=9,r.bulkPut(s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),G=function(e){var t=K.a.bbox(e);return[[t[1],t[0]],[t[3],t[2]]]},R=n(411),J=n(9),U={StoerfallBetriebeKlasse1:"betrieb",StoerfallBetriebeKlasse2:"betrieb",wasserverbaende:"name",wasserschutzgebiete:"zone",autobahnmeisterei:"bezirk",landschaftsschutzgebiete:"sg_typ",naturschutzgebiete:"sg_nummer",strassenmeisterei:"bezirk",bimschNrw:"astnr",bimschWuppertal:"astnr",trinkwasserbrunnen:"str_name",stadtFlurstuecke:"flurstueck"},H={StoerfallBetriebeKlasse1:"stoerfallbetriebe_klasse1",StoerfallBetriebeKlasse2:"stoerfallbetriebe_klasse2",wasserverbaende:"wasserverbaende",wasserschutzgebiete:"wasserschutzgebiete",autobahnmeisterei:"autobahnmeisterei",landschaftsschutzgebiete:"landschaftsschutzgebiete",naturschutzgebiete:"sg_naturschutzgebietetyp",strassenmeisterei:"strassenmeisterei",bimschNrw:"bimsch_nrw",bimschWuppertal:"bimsch_wuppertal",trinkwasserbrunnen:"trinkwasserbrunnen",stadtFlurstuecke:"stadt_flurstuecke"},V=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a){var r,s,i,o,l,u,b,h,f,v,p,x,m,g,O,y,k,w,z,S,A,C,B,D;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=G(a),i=t.table("anprechp"),o=t.table("zustaendigkeit"),l=null,u=null,b=null,h=null,f=Object(c.a)(n),e.prev=9,f.s();case 11:if((v=f.n()).done){e.next=50;break}return p=v.value,e.next=15,t.table("daq_meta");case 15:if(!(x=e.sent)){e.next=48;break}return e.next=19,x.get({name:p});case 19:return m=e.sent,e.next=22,t.table(p);case 22:if(g=e.sent,!m){e.next=48;break}if(null==(O=m.pol_index)){e.next=48;break}if(y=P.a.from(O),null==(k=y.search(s[0][1],s[0][0],s[1][1],s[1][0]))){e.next=48;break}w=Object(c.a)(k),e.prev=30,w.s();case 32:if((z=w.n()).done){e.next=40;break}return S=z.value,e.next=36,g.get(S);case 36:null!=(A=e.sent)&&((C=A.data).typ=p,C.default_name=C[U[p]],B=C.geojson,Object(j.a)(B,a)&&("trinkwasserbrunnen"===p?(D=Y(a,B),(null===u||u>D)&&(Q(p,C,i,o),C.abstand=Math.round(D),l=C,u=D)):"bimschNrw"===p||"bimschWuppertal"===p?(D=Y(a,B),(null===h||h>D)&&(Q(p,C,i,o),C.abstand=Math.round(D),b=C,h=D)):(Q(p,C,i,o),r.push(C))));case 38:e.next=32;break;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(30),w.e(e.t0);case 45:return e.prev=45,w.f(),e.finish(45);case 48:e.next=11;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(9),f.e(e.t1);case 55:return e.prev=55,f.f(),e.finish(55);case 58:return null!==l&&r.push(l),null!==b&&r.push(b),e.abrupt("return",r);case 61:case"end":return e.stop()}}),e,null,[[9,52,55,58],[30,42,45,48]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Y=function(e,t){var n=[e.geometry.coordinates[0],e.geometry.coordinates[1]],a=Object(J.default)(J.default.defs("EPSG:3857"),J.default.defs("EPSG:4326"),n),r=Object(v.a)(t),s=[r.geometry.coordinates[0],r.geometry.coordinates[1]],i=Object(J.default)(J.default.defs("EPSG:3857"),J.default.defs("EPSG:4326"),s);return 1e3*Object(R.a)(a,i,{unit:"kilometers"})*1.6},Q=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a,r){var s,i,o,c,l,u,b,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=H[t],i=Object.keys(n),o=!1,c=0,l=i;case 4:if(!(c<l.length)){e.next=19;break}if("geojson"===(u=l[c])||void 0==n[u]){e.next=16;break}return e.next=9,r.get({tabelle:s,referenz:n[u],referenzfeld:u});case 9:if(!(b=e.sent)){e.next=16;break}return e.next=13,a.get(b.ansprechpartner);case 13:return n.Anprechpartner=e.sent,o=!0,e.abrupt("break",19);case 16:c++,e.next=4;break;case 19:if(!1!==o){e.next=28;break}return e.next=22,r.get({tabelle:s,referenz:"null",referenzfeld:"null"});case 22:if(!(b=e.sent)){e.next=28;break}return e.next=26,a.get({id:""+b.data.ansprechpartner});case 26:(h=e.sent)&&(n.Anprechpartner=h.data);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null,r=Object(c.a)(n),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=21;break}return i=s.value,e.next=8,t.table("daq_meta");case 8:if(null==(o=e.sent)){e.next=19;break}return e.next=12,o.get({name:i});case 12:if(null==(l=e.sent)){e.next=17;break}a=l.time,e.next=19;break;case 17:return console.log("offline data for key "+i+" not available"),e.abrupt("return",null);case 19:e.next=4;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,null,[[2,23,26,29]])})));return function(t,n){return e.apply(this,arguments)}}(),X=(n(798),n(800),n(15)),$=n(10),ee=(n(163),n(60)),te=n(223),ne=n.n(te),ae=function(e){var t=e.hits,n=Object(a.useContext)(O.a).collapsedInfoBox,r=Object(a.useContext)(O.b),s=r.setCollapsedInfoBox,i=r.setSecondaryInfoVisible,o={};if(Array.isArray(t)){var l,d=Object(c.a)(t);try{for(d.s();!(l=d.n()).done;){var u=l.value;switch(u.typ){case"trinkwasserbrunnen":void 0===o.brunnen&&(o.brunnen=[]),o.brunnen.push(u);break;case"bimschNrw":case"bimschWuppertal":void 0===o.bimsch&&(o.bimsch=[]),o.bimsch.push(u);break;case"strassenmeisterei":void 0===o.strassenmeisterei&&(o.strassenmeisterei=[]),o.strassenmeisterei.push(u);break;case"naturschutzgebiete":case"landschaftsschutzgebiete":void 0===o.schutzgebiete&&(o.schutzgebiete=[]),o.schutzgebiete.push(u);break;case"autobahnmeisterei":void 0===o.autobahnmeisterei&&(o.autobahnmeisterei=[]),o.autobahnmeisterei.push(u);break;case"wasserschutzgebiete":void 0===o.wasserschutzgebiete&&(o.wasserschutzgebiete=[]),o.wasserschutzgebiete.push(u);break;case"wasserverbaende":void 0===o.verbaende&&(o.verbaende=[]),o.verbaende.push(u);break;case"StoerfallBetriebeKlasse1":case"StoerfallBetriebeKlasse2":void 0===o.stoerfallbetriebe&&(o.stoerfallbetriebe=[]),o.stoerfallbetriebe.push(u);break;case"stadtFlurstuecke":void 0===o.stadtFlurstuecke&&(o.stadtFlurstuecke=[]),o.stadtFlurstuecke.push(u)}}}catch(g){d.e(g)}finally{d.f()}}var b=Object(D.jsx)("table",{style:{width:"100%"},children:Object(D.jsx)("tbody",{children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"left",verticalAlign:"top",background:"grey",color:"black",opacity:"0.9",paddingLeft:"0px",paddingTop:"0px",paddingBottom:"0px"},children:Object(D.jsxs)("span",{children:[" Analyseergebnis: (",Array.isArray(t)?t.length:"-",")"]})})})})}),h=Object(D.jsx)("div",{}),f=30,j={border:0,borderStyle:"solid",fontSize:f,textAlign:"center"},v={border:0,borderStyle:"solid",fontSize:f,textAlign:"center",color:"#dddddd"},p={fontSize:12,minHeight:"18px"},x=Object(D.jsx)("div",{style:{paddingRight:9},onClick:function(){i(!0)},children:Object(D.jsx)(ne.a,{active:void 0===t,spinner:!0,text:"Suchen",children:Object(D.jsxs)("div",{style:{display:"grid",gridGap:"5px",gridTemplateColumns:"repeat(3, 1fr)",verticalAlign:"center"},children:[Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.brunnen)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.s}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.brunnen)?"Abstand "+(null===o||void 0===o?void 0:o.brunnen[0].abstand)+" m":""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.autobahnmeisterei)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.C}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.autobahnmeisterei)?null===o||void 0===o?void 0:o.autobahnmeisterei[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.strassenmeisterei)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.C}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.strassenmeisterei)?null===o||void 0===o?void 0:o.strassenmeisterei[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.bimsch)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.x}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.bimsch)?("bimschNrw"===(null===o||void 0===o?void 0:o.bimsch[0].typ)?"BRD - ":"UIB - ")+(null===o||void 0===o?void 0:o.bimsch[0].abstand)+" m":""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.wasserschutzgebiete)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.v}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.wasserschutzgebiete)?null===o||void 0===o?void 0:o.wasserschutzgebiete[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.verbaende)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.M}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.verbaende)?null===o||void 0===o?void 0:o.verbaende[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.stoerfallbetriebe)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.q}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.stoerfallbetriebe)?null===o||void 0===o?void 0:o.stoerfallbetriebe[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.stadtFlurstuecke)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.n}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.stadtFlurstuecke)?null===o||void 0===o?void 0:o.stadtFlurstuecke[0].default_name:""})]}),Object(D.jsxs)("div",{style:void 0!==(null===o||void 0===o?void 0:o.schutzgebiete)?j:v,children:[Object(D.jsx)(ee.a,{style:{fontSize:f},icon:$.K}),Object(D.jsx)("div",{style:p,children:void 0!==(null===o||void 0===o?void 0:o.schutzgebiete)?null===o||void 0===o?void 0:o.schutzgebiete[0].default_name:""})]})]})})});return Object(D.jsx)(m.a,{panelClick:function(){},pixelwidth:300,header:b,collapsedInfoBox:n,setCollapsedInfoBox:s,isCollapsible:!1,handleResponsiveDesign:!0,infoStyle:{padding:"0px"},secondaryInfoBoxElements:void 0,alwaysVisibleDiv:h,collapsibleDiv:x,fixedRow:!0})},re=n(34),se=n(412),ie=n(416),oe=function(e){var t=e.hits;if(void 0!==t){var n=[],a=function(e,t,n){return t&&void 0===n&&!1===Array.isArray(t)?Object(D.jsxs)("div",{children:[Object(D.jsxs)("b",{children:[e,":"]})," ",t]}):t&&void 0===n&&!0===Array.isArray(t)?Object(D.jsxs)("div",{children:[Object(D.jsxs)("b",{children:[e,":"]})," ",t.join(", ")]}):t&&void 0!==n?Object(D.jsxs)("div",{children:[Object(D.jsxs)("b",{children:[e,":"]})," ",n(t)]}):void 0};new URLSearchParams(window.location.href).get("showRawData");if(void 0!==t){JSON.parse(JSON.stringify(t));var r,s=Object(c.a)(t);try{for(s.s();!(r=s.n()).done;){delete r.value.geojson}}catch(i){s.e(i)}finally{s.f()}n.push(Object(D.jsx)(se.a,{bsStyle:"info",header:"Umweltalarm (raw data ohne Geometrie): "+t.length+" Treffer",children:Object(D.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(D.jsx)("pre",{children:JSON.stringify(t,null,2)})})},"standort"))}return Object(D.jsx)(ie.a,{titleIconName:"info-circle",title:"Datenblatt: ",mainSection:Object(D.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(D.jsxs)("div",{children:[a("Nummer",null===t||void 0===t?void 0:t.nummer),a("Bezeichnung",null===t||void 0===t?void 0:t.bezeichnung),a("Fl\xe4chengr\xf6\xdfe",null===t||void 0===t?void 0:t.groesse,(function(e){return Object(D.jsxs)("span",{children:[e.toLocaleString()," m\xb2 (circa"," ",(Math.round(e/1e4*10)/10).toLocaleString()," ha)"]})})),a("Stadtbezirk(e)",null===t||void 0===t?void 0:t.stadtbezirke,(function(e){return e.join(", ")})),a("Quartier(e)",null===t||void 0===t?void 0:t.quartiere,(function(e){return e.join(", ")})),a("Eigent\xfcmer",null===t||void 0===t?void 0:t.eigentuemer,(function(e){return e.join(", ")}))]})}),subSections:n})}return null},ce="https://wupp-topicmaps-data.cismet.de",le=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="GazDataForStories",r={},e.next=4,Object(p.d)(a,ce+"/data/3857/adressen.json");case 4:return r.adressen=e.sent,e.next=7,Object(p.d)(a,ce+"/data/3857/bezirke.json");case 7:return r.bezirke=e.sent,e.next=10,Object(p.d)(a,ce+"/data/3857/quartiere.json");case 10:return r.quartiere=e.sent,e.next=13,Object(p.d)(a,ce+"/data/3857/pois.json");case 13:return r.pois=e.sent,e.next=16,Object(p.d)(a,ce+"/data/3857/kitas.json");case 16:r.kitas=e.sent,s=Object(x.b)(r,["pois","kitas","bezirke","quartiere","adressen"]),t(s);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var de=function(e){var t=e.loggedOut,n=Object(a.useState)([]),r=Object(b.a)(n,2),s=r[0],i=r[1],o=Object(a.useState)([]),c=Object(b.a)(o,2),l=(c[0],c[1]),d=Object(a.useState)([]),u=Object(b.a)(d,2),h=u[0],j=u[1],p=Object(a.useContext)(_.a).windowSize;return Object(a.useEffect)((function(){le(i,l)}),[]),Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{}),Object(D.jsx)(g.a,{gazData:s,modalMenu:Object(D.jsx)(L,{}),homeZoom:13,maxZoom:22,secondaryInfo:p&&Object(D.jsx)(oe,{hits:h}),mappingBoundsChanged:function(e){j(void 0);var t=[e.left,e.bottom,e.right,e.top],n=Object(f.a)(t),a=Object(v.a)(n);V(Le,Ie,a).then((function(e){j(e)}))},children:!t&&Object(D.jsx)(ae,{hits:h})})]})},ue=n(116),be=n(128),he=n(74),fe=n(17),je=n.n(fe),ve=n(178),pe=n(805),xe=n(110),me=n(294),ge=n.n(me),Oe=n(413),ye=n.n(Oe);ge.a.extend(ye.a);var ke=function(e){var t=e.setJWT,n=void 0===t?function(e){console.log("you need to set the attribute setJWT in the <Login> component",e)}:t,r=e.loginInfo,s=e.setLoginInfo,i=void 0===s?function(){}:s,o=Object(a.useContext)(_.a).windowSize,c=Object(a.useContext)(re.b).setMetaInformation,l=Object(a.useRef)(),h=Object(a.useRef)(),f={overflowY:"auto",overflowX:"hidden",maxHeight:(null===o||void 0===o?void 0:o.height)||620},j=Object(a.useState)(""),v=Object(b.a)(j,2),x=v[0],m=v[1],g=Object(a.useState)(""),O=Object(b.a)(g,2),y=O[0],k=O[1],w=Object(a.useState)(!1),z=Object(b.a)(w,2),S=z[0],A=z[1];window.localforage=je.a;var C=function(e){je.a.setItem("@"+Be+".auth.user",e),m(e)};Object(a.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.a.getItem("@"+Be+".auth.user");case 2:return t=e.sent,e.next=5,Z(Le,Ie);case 5:n=e.sent,console.log("xxx o"+n),console.log("xxx offData"+(null!==n&&void 0!==n)),A(null!==n&&void 0!==n),null!==n&&void 0!==n&&(a=ge()(n,"YYYY-MM-DD hh:mm:ss").toDate(),c({time:a})),t&&C(t),(null===h||void 0===h?void 0:h.current)&&(h.current.focus(),h.current.select());case 12:case"end":return e.stop()}}),e)})))()}),[]);var B=function(){fetch("https://umweltalarm-api.cismet.de/users",{method:"GET",headers:{Authorization:"Basic "+btoa(x+"@WUNDA_BLAU:"+y),"Content-Type":"application/json"}}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){var t=e.jwt;i({color:"#79BD9A",text:"Anmeldung erfolgreich. Daten werden geladen."}),setTimeout((function(){n(t),i()}),500)})):(i({color:"#FF8048",text:"Bei der Anmeldung ist ein Fehler aufgetreten. "}),setTimeout((function(){i()}),2500))})).catch((function(e){i({color:"#FF3030",text:"Bei der Anmeldung ist ein Fehler aufgetreten."}),setTimeout((function(){i()}),2500)}))};return Object(D.jsxs)(ve.a,{style:{zIndex:3e9},height:"100%",size:"l",show:!0,keyboard:!1,children:[Object(D.jsx)(ve.a.Header,{children:Object(D.jsx)(ve.a.Title,{children:Object(D.jsx)("div",{children:Object(D.jsxs)("div",{children:[Object(D.jsx)(X.a,{name:"user"})," Anmeldung"]})})})}),Object(D.jsx)(ve.a.Body,{style:f,id:"potenzialflaechen-online",children:Object(D.jsxs)(pe.a,{children:[Object(D.jsxs)(pe.a.Group,{controlId:"potenzialflaechen-online-login",children:[Object(D.jsx)(pe.a.Label,{children:"WuNDa Benutzername"}),Object(D.jsx)(pe.a.Control,{value:x,ref:h,onChange:function(e){C(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l.current&&l.current.focus()},placeholder:"Login hier eingeben"})]}),Object(D.jsxs)(pe.a.Group,{controlId:"potenzialflaechen-online-pass",children:[Object(D.jsx)(pe.a.Label,{children:"Passwort"}),Object(D.jsx)(pe.a.Control,{ref:l,value:y,onChange:function(e){k(e.target.value)},type:"password",placeholder:"Password",onKeyPress:function(e){"Enter"===e.key&&B()}})]}),Object(D.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"baseline",flexDirection:"row",justifyContent:"space-between"},children:[(null===r||void 0===r?void 0:r.text)&&Object(D.jsx)("div",{style:{margin:10,color:(null===r||void 0===r?void 0:r.color)||"black",maxWidth:200},children:Object(D.jsx)("b",{children:null===r||void 0===r?void 0:r.text})}),Object(D.jsx)("div",{style:{flexShrink:100}}),Object(D.jsxs)("div",{children:[!0===S&&Object(D.jsx)(xe.a,{onClick:function(e){i({color:"#79BD9A",text:"Alte Daten werden aus dem Cache \xfcbernommen."}),setTimeout((function(){n(p.a),i()}),500)},style:{margin:5,marginTop:30},variant:"secondary",children:"Offline arbeiten"}),Object(D.jsx)(xe.a,{onClick:function(e){B()},style:{margin:5,marginTop:30},variant:"primary",children:"Anmeldung"})]})]})]})},"login")]})},we=n(414),ze=n.n(we),Se=function(e){var t=e.waiting,n=Object(a.useContext)(re.a).selectedFeature;return Object(D.jsxs)(ve.a,{style:{zIndex:3e9},height:"200",size:"s",show:void 0!==t,keyboard:!1,children:[Object(D.jsx)(ve.a.Header,{children:Object(D.jsxs)(ve.a.Title,{children:[Object(D.jsx)(X.a,{name:null===t||void 0===t?void 0:t.icon})," ",null===t||void 0===t?void 0:t.title]})}),Object(D.jsx)(ve.a.Body,{children:Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline"},children:[Object(D.jsx)(ze.a,{type:"cylon",color:null===n||void 0===n?void 0:n.properties.color})," ",Object(D.jsx)("div",{style:{marginLeft:20},children:null===t||void 0===t?void 0:t.text})]})})]})},Ae=function(e){var t,n,r,s,i=e.logout,o=e.jwt,c=Object(a.useContext)(_.a).windowSize,l=Object(a.useContext)(re.a).metaInformation;if(l){var d=l.time;t=new Date(d).toLocaleString()}if(o===p.a)n="Daten aus dem Cache",s="anmelden und Daten aktualisieren";else try{r=atob(o.split(".")[1]),n=JSON.parse(r).sub,s="abmelden"}catch(b){}var u=Object(D.jsxs)("div",{children:[Object(D.jsx)("b",{children:"Umweltalarm"})," (",n+(void 0!==t?", "+t:""),")",Object(D.jsx)("div",{style:{float:"right",paddingRight:10},children:Object(D.jsx)("a",{style:{color:"#337ab7"},onClick:function(){i()},children:s})})]});return Object(D.jsx)("table",{style:{width:((null===c||void 0===c?void 0:c.width)||300)-54-12-38-12+"px",height:"30px",position:"absolute",left:54,top:12,zIndex:555},children:Object(D.jsx)("tbody",{children:Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center",verticalAlign:"middle",background:"#ffffff",color:"black",opacity:"0.9",paddingLeft:"10px"},children:u})})})})},Ce=n(151),Be="umweltalarm.Online.Wuppertal",De="https://umweltalarm-api.cismet.de",Ie=["StoerfallBetriebeKlasse1","StoerfallBetriebeKlasse2","wasserverbaende","wasserschutzgebiete","autobahnmeisterei","landschaftsschutzgebiete","naturschutzgebiete","strassenmeisterei","bimschNrw","bimschWuppertal","trinkwasserbrunnen","stadtFlurstuecke"],Le=function(e,t){var n,a=new F.a(e),r={},s=Object(c.a)(t);try{for(s.s();!(n=s.n()).done;){r[n.value]="gid"}}catch(i){s.e(i)}finally{s.f()}return r.daq_meta="++id,name,md5,time",r.anprechp="id",r.zustaendigkeit="id,tabelle,referenzfeld,referenz,[tabelle+referenzfeld+referenz]",a.version(10).stores(r),a}(Be,Ie);var _e=function(){var e;Object(a.useEffect)((function(){document.title="Umweltalarm Wuppertal"}),[]);var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),l=Object(b.a)(i,2),f=l[0],j=l[1],v=Object(a.useState)(),p=Object(b.a)(v,2),x=p[0],m=(p[1],Object(a.useState)()),g=Object(b.a)(m,2),O=g[0],y=g[1],k=function(e){je.a.setItem("@"+Be+".auth.jwt",e),s(e)};Object(a.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.a.getItem("@"+Be+".auth.jwt");case 2:(t=e.sent)?(k(t),j(!1)):(k(void 0),j(!0));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){if(r){var e,t=Object(c.a)(Ie);try{for(t.s();!(e=t.n()).done;){var n=e.value;N(Be,De,r,n,Le).then((function(e){}),(function(e){401===e.status&&(k(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)}))}}catch(a){t.e(a)}finally{t.f()}N(Be,De,r,"ansprechpartner",Le).then((function(e){void 0!==e&&Array.isArray(e.data)&&W(e.data,"ansprechpartner",Le)}),(function(e){401===e.status&&(k(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)})),N(Be,De,r,"ansprechpartnerZustaendigkeit",Le).then((function(e){void 0!==e&&Array.isArray(e.data)&&(console.log("Ansprechpartner referenz"),q(e.data,"ansprechpartnerZustaendigkeit",Le))}),(function(e){401===e.status&&(k(void 0),y({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){y()}),2500))})).catch((function(e){console.log("xxx error ",e)})),j(!1)}else j(!0)}),[r]),e=-1===Object(be.a)()?[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Stadtplan (Vektordaten light)",mode:"default",layerKey:"vector"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}]:[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}];var w=Object(o.a)({},he.b);return void 0==w.namedLayers.cismetLight&&(w.namedLayers.cismetLight={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-light/style.json",pane:"backgroundvectorLayers"}),void 0==w.namedLayers.cismetText&&(w.namedLayers.cismetText={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-text/style.json",pane:"backgroundlayerTooltips"}),Object(D.jsxs)(h.c,{persistenceSettings:{ui:["XappMenuVisible","appMenuActiveMenuSection","collapsedInfoBox"],featureCollection:["filterState","filterMode","clusteringEnabled"],responsive:[],styling:["activeAdditionalLayerKeys","namedMapStyle","selectedBackground","markerSymbolSize"]},additionalLayerConfiguration:{brunnen:{title:Object(D.jsx)("span",{children:"Trinkwasserbrunnen"}),initialActive:!0,layer:Object(D.jsx)(Ce.a,{style_:"http://localhost:888/styles/brunnen/style.json",style:"https://omt.map-hosting.de/styles/brunnen/style.json",pane:"additionalLayers0"},"brunnen")},kanal:{title:Object(D.jsx)("span",{children:"Kanalnetz"}),initialActive:!0,layer:Object(D.jsx)(Ce.a,{style_:"http://localhost:888/styles/kanal/style.json",style:"https://omt.map-hosting.de/styles/kanal/style.json",pane:"additionalLayers1"},"kanal")},gewaesser:{title:Object(D.jsx)("span",{children:"Gew\xe4ssernetz"}),initialActive:!0,layer:Object(D.jsx)(Ce.a,{style_:"http://localhost:888/styles/gewaesser/style.json",style:"https://omt.map-hosting.de/styles/gewaesser/style.json",pane:"additionalLayers2"},"gewaesser")}},baseLayerConf:w,backgroundConfigurations:{lbk:{layerkey:"cismetText|trueOrtho2020@40",layerkey_:"wupp-plan-live@100|trueOrtho2020@75|rvrSchrift@100",src:"/images/rain-hazard-map-bg/ortho.png",title:"Luftbildkarte"},stadtplan:{layerkey:"wupp-plan-live@60",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},vector:{layerkey:"cismetLight",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"}},backgroundModes:e,referenceSystem:ue.b.crs3857,mapEPSGCode:"3857",referenceSystemDefinition:ue.b.proj4crs3857def,maskingPolygon:"POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))",children:[f&&void 0===r&&Object(D.jsx)(ke,{setJWT:k,loginInfo:O,setLoginInfo:y},"login."),!f&&Object(D.jsx)(Ae,{logout:function(){k(void 0),j(!0),y({color:"#69D2E7",text:"Sie wurden erfolgreich abgemeldet."}),setTimeout((function(){y()}),2500)},jwt:r}),Object(D.jsx)(Se,{waiting:x}),Object(D.jsx)(de,{loggedOut:f})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,806)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(_e,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Te()}},[[799,1,2]]]);
//# sourceMappingURL=main.9e369453.chunk.js.map